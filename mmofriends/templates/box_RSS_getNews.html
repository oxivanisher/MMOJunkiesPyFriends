<table id="rssNewsFeed" style="width: 100%; margin-bottom: 0px; table-layout: fixed;" class="table-striped"></table>
<script type="text/javascript">
	var timeout{{ box.netHandle }}{{ box.handle }};
	function drawNewsContent{{ box.netHandle }}{{ box.handle }}( data, drawOnline ) {
		showMe = false;
		for (id in data.feeds) {
			var feed = data.feeds[id];
			console.log(feed);

			$('#rssNewsFeed').append('<tr><th class="text-wrap">' + feed.title + '</th></tr>');

			for (eId in feed.entries) {
				var entry = feed.entries[eId];
				showMe = true;

				$('#rssNewsFeed').append('<tr><td class="text-wrap"><a href="' + entry.link + '" title="' + entry.date + ': ' + entry.summary + '" target="_blank">' + entry.title + '</a></td></tr>');

				console.log(entry);
			}
		}

		return showMe
	}
	function redrawBox{{ box.netHandle }}{{ box.handle }}( force ) {
		var run = true;
		if (force == undefined) {
			if ($( "#rssNewsFeed" ).parents('.col').is(":hidden")){
				run = false;
			} else if (windowIdleCheck()) {
				run = false;
			}
		}
		if (run) {
			clearTimeout(timeout{{ box.netHandle }}{{ box.handle }});
			var dataUrl = "{{ url_for('dashboard_method_json', netHandle=box.netHandle, methodHandle=box.handle) }}";
			$.getJSON( dataUrl ).done( function( data ) {

				$( "#rssNewsFeed" ).fadeOut( 100, function () {
					$('#rssNewsFeed').empty();
					if (drawNewsContent{{ box.netHandle }}{{ box.handle }}( data, true )) {
						$( "#rssNewsFeed" ).fadeIn( 100 );
					}
				});

			});
			timeout{{ box.netHandle }}{{ box.handle }} = setTimeout(redrawBox{{ box.netHandle }}{{ box.handle }}, 31000);
		}
	}
</script>