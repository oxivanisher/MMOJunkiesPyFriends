<ul class="list-group twitchChannels"></ul>
<script type="text/javascript">
	(function() {
		var dataUrl = "{{ url_for('dashboard_method_json', netHandle=box.netHandle, methodHandle=box.handle) }}";

		$.getJSON( dataUrl ).done( function( data ) {
			for (id in data.channels) {
				s = data.streams[id];
				c = data.channels[id];
				var onlineText = "";
				var status = "has-warning";
				if (s.stream) {
					onlineText = "<br /><img class='img-responsive' src='" + s.stream.preview + "' title='" + s.stream.game + "'/>";
					status = "has-success";
				}

				var icon = "<div class='input-group-addon'><span class='glyphicon glyphicon-remove form-control-feedback' aria-hidden='true'></span></div>";
				var label = "<label class='control-label' for='inputSuccess1'>" + c.display_name + icon + "</label>";
				var liText = "<a href='" + c.url + "' target='_blank'>" + label + onlineText + "</a>";

				$('<li class="list-group-item form-group ' + status + '">' + liText + '</li>').appendTo('ul.twitchChannels');
			}
		});
	})();
</script>
