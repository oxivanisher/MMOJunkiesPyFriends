<ul class="list-group twitchChannels"></ul>
<script type="text/javascript">
	(function() {
		var dataUrl = "{{ url_for('dashboard_method_json', netHandle=box.netHandle, methodHandle=box.handle) }}";

		$.getJSON( dataUrl ).done( function( data ) {
			for (id in data.channels) {
				s = data.streams[id];
				c = data.channels[id];
				var onlineText = "";
				var status = "has-warning";
				var glyph = "glyphicon-remove"
				if (s.stream) {
					onlineText = "<img class='img-responsive' src='" + s.stream.preview + "' title='" + s.stream.game + "'/>";
					status = "has-success";
					glyph = "glyphicon-ok";
				}

				var icon = "<div><span class='glyphicon " + glyph + "' style='vertical-align:right'></span></div>";
				var label = "<div><label class='control-label' for='inputSuccess1' style='width: 100%;'>" + c.display_name + "</label></div>";
				var content = "<div>" + label + icon + "</div>" + onlineText;
				var liText = "<a href='" + c.url + "' target='_blank'>" + content + "</a>";
				// aria-hidden='true'

				$('<li class="list-group-item form-group ' + status + '">' + liText + '</li>').appendTo('ul.twitchChannels');
			}
		});
	})();
</script>
