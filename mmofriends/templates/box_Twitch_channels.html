<ul class="list-group twitchChannels"></ul>
<script type="text/javascript">
	(function() {
		var dataUrl = "{{ url_for('dashboard_method_json', netHandle=box.netHandle, methodHandle=box.handle) }}";

		$.getJSON( dataUrl ).done( function( data ) {
			for (id in data.channels) {
				s = data.streams[id];
				c = data.channels[id];
				var image = "";
				var status = "text-warning";
				var glyph = "glyphicon-remove"
				if (s.stream) {
					image = "<img class='img-responsive' src='" + s.stream.preview + "' title='" + s.stream.game + "'/>";
					status = "text-success";
					glyph = "glyphicon-ok";
				}

				var icon = "<span class='glyphicon " + glyph + " " + status + " pull-right'></span>";
				var label = "<label class='control-label " + status + "' for='inputSuccess1'>" + c.display_name + "</label>";
				var content = label + icon + image;
				// var content = "<div>" + label + icon + "</div>" + image;
				// var liText = "<a href='" + c.url + "' target='_blank'>" + content + "</a>";
				// aria-hidden='true'

				$('<li class="list-group-item" onclick="window.open(\'' + c.url + '\')">' + content + '</li>').appendTo('ul.twitchChannels');
			}
		});
	})();
</script>
