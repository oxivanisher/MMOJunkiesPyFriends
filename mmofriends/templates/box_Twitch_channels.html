<ul class="list-group twitchChannels"></ul>
<script type="text/javascript">
	(function() {
		var dataUrl = "{{ url_for('dashboard_method_json', netHandle=box.netHandle, methodHandle=box.handle) }}";

		$.getJSON( dataUrl ).done( function( data ) {
			for (id in data.channels) {
				s = data.streams[id];
				c = data.channels[id];
				var onlineText = "";
				// console.log(Object.keys(s.stream.preview))
				if (s.stream) {
					onlineText = "<br /><img src='" + s.stream.preview + "' title='" + s.stream.game + "'/>";
				}

				var liText = "<a href='" + c.url + "' target='_blank'>" + c.display_name + onlineText + "</a>";

				$('<li class="list-group-item">', { html: liText }, '</li>').appendTo('ul.twitchChannels');
			}
		});
	})();
</script>
